/* ============================================
   STYLE GUIDE IMPLEMENTATION
   Based on LLM Styleguide.md
   ============================================ */

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Color Palette - Style Guide */
:root {
    /* Primary Colors */
    --color-primary-blue: #041295;
    --color-light-blue: #00BBDD;
    --color-blue-50: #E6E7F4;
    
    /* Status Colors */
    --color-error-red: #E01E00;
    --color-success-green: #00BBDD;
    --color-warning-orange: #FFA500;
    
    /* Neutral Colors */
    --color-white: #FFFFFF;
    --color-gray-25: #F7F7F9;
    --color-gray-500: #5D607E;
    --color-gray-700: #383A4B;
    --color-gray-750: #333344;
    --color-gray-900: #131319;
    
    /* Spacing System (4px base unit) */
    --spacing-2: 8px;   /* Small */
    --spacing-3: 12px;  /* Medium */
    --spacing-4: 16px;  /* Large */
    --spacing-6: 24px;  /* XLarge */
    --spacing-8: 32px;  /* XXLarge */
}

body {
    font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 400;
    line-height: 1.5;
    color: var(--color-gray-900);
    background-color: var(--color-gray-25);
    height: 100vh;
    overflow: hidden;
}

#root {
    height: 100vh;
    width: 100vw;
}

/* ============================================
   TYPOGRAPHY - Style Guide
   ============================================ */

/* Headings */
h1, .h1 {
    font-family: 'Roboto', sans-serif;
    font-size: 42px;
    font-weight: 500;
    line-height: 50px;
    color: var(--color-primary-blue);
    margin: 0;
}

h2, .h2 {
    font-family: 'Roboto', sans-serif;
    font-size: 28px;
    font-weight: 600;
    line-height: 36px;
    color: var(--color-primary-blue);
    margin: 0;
}

h3, .h3 {
    font-family: 'Roboto', sans-serif;
    font-size: 20px;
    font-weight: 700;
    line-height: 28px;
    color: var(--color-primary-blue);
    margin: 0;
}

h4, .h4 {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 700;
    line-height: 24px;
    color: var(--color-primary-blue);
    margin: 0;
}

/* Body Text */
.body-1-regular {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 24px;
    color: var(--color-gray-900);
}

.body-1-medium {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 500;
    line-height: 24px;
    color: var(--color-gray-900);
}

.body-1-bold {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 700;
    line-height: 24px;
    color: var(--color-gray-900);
}

.body-2-regular {
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    color: var(--color-gray-500);
}

.body-2-medium {
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    color: var(--color-gray-700);
}

/* Canvas Container */
.canvas-container {
    height: 100vh;
    width: 100vw;
    position: relative;
}

.journey-canvas-container {
    outline: none;
}

.journey-canvas-container:focus {
    outline: none;
}

/* React Flow Styles */
.react-flow__node {
    cursor: grab;
}

.react-flow__node:active {
    cursor: grabbing;
}

/* Remove React Flow's default selection styling */
.react-flow__node.selected {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
}

.react-flow__node.selected .react-flow__node-resizer {
    display: none !important;
}

.react-flow__node.selected .react-flow__node-resizer::before {
    display: none !important;
}

.react-flow__controls {
    background: var(--color-white);
    border: 1px solid var(--color-blue-50);
    border-radius: 2px;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
}

.react-flow__controls-button {
    border: none;
    background: transparent;
    color: var(--color-gray-500);
    transition: color 0.2s ease;
}

.react-flow__controls-button:hover {
    color: var(--color-primary-blue);
}

.react-flow__minimap {
    background: var(--color-white);
    border: 1px solid var(--color-blue-50);
    border-radius: 2px;
}

/* Custom Node Styles - Style Guide */
.journey-start-node {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--color-gray-25);
    border: 2px solid var(--color-blue-50);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-gray-700);
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    font-size: 12px;
    text-align: center;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    position: relative;
}

/* Lock icon is now rendered via JSX Material Icons, not CSS */

.journey-end-node {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(0, 187, 221, 0.1); /* Light success green background */
    border: 2px solid var(--color-success-green);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-success-green);
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    font-size: 12px;
    text-align: center;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
}

.journey-end-node.error {
    background: rgba(224, 30, 0, 0.1); /* Light error red background */
    border-color: var(--color-error-red);
    color: var(--color-error-red);
}

.journey-condition-node {
    width: 100px;
    height: 80px;
    background: transparent;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.2s ease;
}

.condition-diamond {
    width: 100%;
    height: 100%;
    /* Default state now matches previous selected state - looks great */
    background: var(--color-blue-50); /* Light blue background */
    border: 2px solid var(--color-primary-blue); /* Primary blue border */
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    position: relative;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
}

.condition-content {
    color: var(--color-primary-blue); /* Primary blue text */
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    font-size: 12px;
    text-align: center;
    line-height: 1.2;
}

.journey-condition-node.selected {
    transform: scale(1.05);
}

/* Selected state uses light blue highlight - complementary to primary blue */
.journey-condition-node.selected .condition-diamond {
    background: rgba(0, 187, 221, 0.15) !important; /* Light blue tint for selected state */
    border-color: var(--color-primary-blue);
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08),
                0 0 0 4px rgba(0, 187, 221, 0.2); /* Light blue glow for selected */
}

.journey-condition-node.selected .condition-content {
    color: var(--color-primary-blue); /* Keep primary blue text when selected */
}

/* Frontend Form Node (rounded square) - Style Guide */
.frontend-form-node {
    width: 160px;
    min-height: 80px;
    background: var(--color-blue-50);
    border: 2px solid var(--color-primary-blue);
    border-radius: 8px; /* Slightly rounded corners */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-3);
    color: var(--color-primary-blue);
    text-align: center;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    position: relative;
}

.frontend-form-node .frontend-form-title {
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    font-size: 12px;
    margin-bottom: 4px;
    color: var(--color-primary-blue);
}

.frontend-form-node .frontend-form-subtitle {
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    font-size: 11px;
    color: var(--color-gray-700);
}

.frontend-form-node.selected {
    outline: 2px solid var(--color-primary-blue);
    outline-offset: 2px;
    transform: scale(1.05);
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08),
                0 0 0 4px rgba(4, 18, 149, 0.12);
}

/* Port badges for Frontend - Form */
.frontend-form-node .port-badge {
    position: absolute;
    right: -2px;
    transform: translateY(-50%);
    background: var(--color-white);
    padding: 0px 5px;
    font-family: 'Roboto', sans-serif;
    font-size: 8px;
    font-weight: 700;
    border-radius: 2px; /* Style guide border radius */
    line-height: 1;
    white-space: nowrap;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    border: 1px solid var(--color-blue-50);
    pointer-events: none; /* allow dragging via enlarged invisible handle underneath */
    z-index: 2;
}

.frontend-form-node .port-badge.success {
    color: var(--color-success-green);
    border-color: var(--color-success-green);
    background: rgba(0, 187, 221, 0.1);
}

.frontend-form-node .port-badge.error {
    color: var(--color-error-red);
    border-color: var(--color-error-red);
    background: rgba(224, 30, 0, 0.1);
}

/* Visible dots next to badges */
.frontend-form-node .port-dot {
    position: absolute;
    right: 56px; /* aligns with the left edge of the enlarged handle */
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-primary-blue);
    border: 2px solid var(--color-white);
    transform: translateY(-50%);
    z-index: 3;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04);
}

/* Menu icon for Frontend - Form - removed old definition, using style guide version below */

/* Canvas Background */
.react-flow__background {
    background-color: var(--color-gray-25);
}

/* Edge Styles */
.react-flow__edge-path {
    stroke: var(--color-primary-blue);
    stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path {
    stroke: var(--color-primary-blue) !important; /* Primary blue for selected edges */
    stroke-width: 4 !important;
}

.react-flow__edge:hover .react-flow__edge-path {
    stroke: var(--color-light-blue);
    stroke-width: 3;
}

.react-flow__edge.selected {
    outline: 2px solid var(--color-primary-blue);
    outline-offset: 2px;
    z-index: 10; /* Ensure selected edges are on top */
}

.react-flow__edge:not(.selected) {
    z-index: 1; /* Non-selected edges below */
}

/* Selected edge markers (arrow heads) - match edge color */
.react-flow__edge.selected marker path,
.react-flow__edge.selected svg marker path,
.react-flow__edge.selected svg defs marker path {
    fill: var(--color-primary-blue) !important;
    stroke: var(--color-primary-blue) !important;
}

/* Global marker styling for selected edges - React Flow creates markers in SVG defs */
.react-flow__edge.selected svg defs marker path,
.react-flow svg defs marker[id*="selected"] path {
    fill: var(--color-primary-blue) !important;
    stroke: var(--color-primary-blue) !important;
}

/* Alternative selector for React Flow markers - target by marker-end reference */
.react-flow__edge.selected .react-flow__edge-path[marker-end] {
    marker-end-color: var(--color-primary-blue);
}

/* Ensure arrow heads match selected edge color */
.react-flow__edge.selected .react-flow__edge-path + * path,
.react-flow__edge.selected svg[marker-end] marker path {
    fill: var(--color-primary-blue) !important;
}

/* Handle Styles */
.react-flow__handle {
    width: 8px;
    height: 8px;
    background: var(--color-primary-blue);
    border: 2px solid var(--color-white);
    border-radius: 50%;
    transition: all 0.2s ease;
    pointer-events: all;
}

.react-flow__handle:hover {
    background: var(--color-light-blue);
    transform: scale(1.2);
}

.react-flow__handle-connecting {
    background: var(--color-light-blue);
    transform: scale(1.3);
}

.react-flow__handle-valid {
    background: var(--color-success-green);
}

.react-flow__handle-invalid {
    background: var(--color-error-red);
}

/* Selection Styles */
.react-flow__node.selected {
    outline: none !important;
    outline-offset: 0 !important;
    transform: scale(1.05);
}

.react-flow__node.selected::before {
    display: none !important;
}

.journey-start-node.selected,
.journey-end-node.selected {
    outline: 2px solid var(--color-primary-blue);
    outline-offset: 2px;
    transform: scale(1.05);
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08),
                0 0 0 4px rgba(4, 18, 149, 0.12);
}

/* Animation */
.react-flow__node {
    transition: all 0.2s ease;
}

.react-flow__node:hover {
    transform: scale(1.05);
}

/* Add Node Button */
.add-node-container {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 1000;
}

.add-node-button {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--color-primary-blue);
    color: var(--color-white);
    border: none;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.add-node-button:hover {
    background: var(--color-light-blue);
    transform: scale(1.1);
    box-shadow: 0px 4px 8px 0px rgba(1, 5, 50, 0.06), 
                0px 6px 10px 0px rgba(1, 5, 50, 0.06), 
                0px 2px 12px 0px rgba(1, 5, 50, 0.1);
}

.add-node-button:active {
    transform: scale(0.95);
}

/* Node Selection Menu */
.node-menu {
    position: absolute;
    top: 60px;
    right: 0;
    background: var(--color-white);
    border: 1px solid var(--color-blue-50);
    border-radius: 2px;
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    min-width: 150px;
    padding: var(--spacing-2) 0;
    z-index: 1001;
}

.node-menu-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-3) var(--spacing-4);
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.node-menu-item:hover {
    background-color: var(--color-gray-25);
}

/* Old node-menu-icon definition removed - using Material Icons instead */

.node-menu-icon.end-icon {
    background: #dcfce7;
    color: #166534;
    border: 2px solid #bbf7d0;
}

.node-menu-icon.end-error-icon {
    background: #fee2e2;
    color: #991b1b;
    border: 2px solid #fecaca;
}

.node-menu-icon.condition-icon {
    background: #fef3c7;
    color: #92400e;
    border: 2px solid #f59e0b;
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    border-radius: 0;
    font-weight: bold;
}

.node-menu-item span {
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    color: var(--color-gray-900);
}

/* Menu Overlay */
.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 999;
    background: transparent;
}

/* ============================================
   LAYOUT STRUCTURE - Style Guide
   ============================================ */

/* Header (64px height, 100% width) */
.header {
    background: var(--color-white);
    box-shadow: 0px 2px 4px 0px rgba(1, 5, 50, 0.04), 
                0px 4px 5px 0px rgba(1, 5, 50, 0.04), 
                0px 1px 10px 0px rgba(1, 5, 50, 0.08);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    height: 64px;
    width: 100%;
}

.header-content {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 var(--spacing-3);
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
}

.logo h1 {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 500;
    color: var(--color-gray-900);
    margin: 0;
}

/* Canvas should account for header */
.canvas-container {
    padding-top: 64px;
    height: calc(100vh - 64px);
}

/* ============================================
   SIDESHEET - Style Guide
   ============================================ */

.sidesheet {
    position: fixed;
    top: 64px; /* account for header */
    right: 0;
    width: 40%;
    height: calc(100vh - 64px);
    background: var(--color-white);
    border-left: 1px solid var(--color-blue-50);
    box-shadow: -6px 0 16px rgba(1, 5, 50, 0.08);
    display: flex;
    flex-direction: column;
    z-index: 1100;
}

.sidesheet-header {
    padding: var(--spacing-4) var(--spacing-6);
    border-bottom: 1px solid var(--color-blue-50);
}

.sidesheet-title {
    font-family: 'Roboto', sans-serif;
    font-size: 20px;
    font-weight: 700;
    line-height: 28px;
    color: var(--color-primary-blue);
}

.sidesheet-tabs { 
    display: flex; 
    gap: var(--spacing-2); 
    padding: var(--spacing-2) var(--spacing-6); 
    border-bottom: 1px solid var(--color-blue-50); 
}

.tab-btn { 
    border: none; 
    background: var(--color-gray-25); 
    padding: 6px 10px; 
    border-radius: 2px; 
    cursor: pointer;
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    color: var(--color-gray-700);
    transition: all 0.2s ease;
}

.tab-btn:hover {
    background: var(--color-blue-50);
}

.tab-btn.active { 
    background: var(--color-primary-blue); 
    color: var(--color-white); 
}

.sidesheet-body {
    padding: var(--spacing-4) var(--spacing-6);
    flex: 1;
    overflow-y: auto;
}

.sidesheet-footer {
    padding: var(--spacing-3) var(--spacing-6);
    border-top: 1px solid var(--color-blue-50);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sidesheet-footer .footer-left,
.sidesheet-footer .footer-right { 
    display: flex; 
    gap: var(--spacing-2); 
}

/* ============================================
   INPUT FIELD STYLES - Style Guide
   ============================================ */

/* Input Container */
.input-container {
    display: flex;
    flex-direction: column;
    gap: 4px; /* 2px gap between elements */
}

/* Input Label */
.input-label,
label.input-label {
    display: block;
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    color: var(--color-gray-900);
    margin-bottom: 4px; /* 4px gap between label and input */
}

.input-label .required {
    color: var(--color-error-red);
    font-weight: 500;
    margin-left: 2px;
}

/* Default Input Field */
.text-input,
input.text-input,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
textarea {
    width: 100%;
    background: var(--color-white);
    border: 1px solid var(--color-gray-500);
    border-radius: 2px;
    height: 40px; /* medium size */
    padding: 12px var(--spacing-2);
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    color: var(--color-gray-900);
    outline: none;
    transition: all 0.2s ease;
}

textarea {
    min-height: 40px;
    resize: vertical;
}

.text-input::placeholder,
input::placeholder,
textarea::placeholder {
    color: var(--color-gray-500);
}

/* Input Field States */
.text-input:focus,
input:focus,
textarea:focus {
    border-color: var(--color-primary-blue);
    box-shadow: 0 0 0 2px rgba(4, 18, 149, 0.1);
}

/* Error State */
.text-input.error,
input.error,
textarea.error,
.text-input:invalid:not(:placeholder-shown),
input:invalid:not(:placeholder-shown) {
    border-color: var(--color-error-red);
}

.input-error-message,
.error-text {
    font-family: 'Roboto', sans-serif;
    font-size: 12px;
    font-weight: 400;
    line-height: 16px;
    color: var(--color-error-red);
    margin-top: 2px; /* 2px gap below input field */
}

/* Success State */
.text-input.success,
input.success,
textarea.success {
    border-color: var(--color-success-green);
}

.input-success-message {
    font-family: 'Roboto', sans-serif;
    font-size: 12px;
    font-weight: 400;
    line-height: 16px;
    color: var(--color-success-green);
    margin-top: 2px;
}

/* Warning State */
.text-input.warning,
input.warning,
textarea.warning {
    border-color: var(--color-warning-orange);
}

.input-warning-message {
    font-family: 'Roboto', sans-serif;
    font-size: 12px;
    font-weight: 400;
    line-height: 16px;
    color: var(--color-warning-orange);
    margin-top: 2px;
}

/* Disabled State */
.text-input:disabled,
input:disabled,
textarea:disabled {
    background: var(--color-gray-25);
    border-color: var(--color-blue-50);
    color: var(--color-gray-500);
    cursor: not-allowed;
}

/* Input Caption/Helper Text */
.input-caption {
    font-family: 'Roboto', sans-serif;
    font-size: 12px;
    font-weight: 400;
    line-height: 16px;
    color: var(--color-gray-500);
    margin-top: 2px;
}

/* Read-only text display (for read-only fields like ID) */
.read-only-text {
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    color: var(--color-gray-500); /* Light gray from style guide to indicate read-only */
    padding: 12px var(--spacing-2);
    margin-top: 4px; /* Match spacing of input field */
    min-height: 20px; /* Match input field height */
}

/* Input with Icons */
.input-with-icon {
    position: relative;
    display: flex;
    align-items: center;
}

.input-with-icon .input-icon {
    position: absolute;
    width: 20px;
    height: 20px;
    color: inherit;
}

.input-with-icon .input-icon-left {
    left: var(--spacing-2);
}

.input-with-icon .input-icon-right {
    right: var(--spacing-2);
}

.input-with-icon input {
    padding-left: calc(var(--spacing-2) + 20px + var(--spacing-2));
}

.input-with-icon .input-icon-right + input {
    padding-right: calc(var(--spacing-2) + 20px + var(--spacing-2));
}

/* ============================================
   BUTTON STYLES - Style Guide
   ============================================ */

/* Primary Button */
.btn-primary,
button.btn-primary {
    background: var(--color-primary-blue);
    color: var(--color-white);
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: 2px;
    height: 40px;
    padding: 8px var(--spacing-3);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
    transition: all 0.2s ease;
}

.btn-primary:hover {
    background: #0515b8;
    opacity: 0.9;
}

.btn-primary:active {
    opacity: 0.8;
}

.btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary .icon {
    width: 20px;
    height: 20px;
}

/* Secondary Button */
.btn-secondary,
button.btn-secondary {
    background: transparent;
    color: var(--color-primary-blue);
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    border: 1px solid var(--color-primary-blue);
    border-radius: 2px;
    height: 40px;
    padding: 8px var(--spacing-3);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
    transition: all 0.2s ease;
}

.btn-secondary:hover {
    background: rgba(4, 18, 149, 0.05);
}

.btn-secondary:active {
    background: rgba(4, 18, 149, 0.1);
}

.btn-secondary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-secondary .icon {
    width: 20px;
    height: 20px;
}

/* Tertiary Button */
.btn-tertiary,
button.btn-tertiary {
    background: transparent;
    color: var(--color-gray-700);
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: 2px;
    height: 40px;
    padding: 8px var(--spacing-3);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
    transition: all 0.2s ease;
}

.btn-tertiary:hover {
    background: rgba(56, 58, 75, 0.05);
}

.btn-tertiary:active {
    background: rgba(56, 58, 75, 0.1);
}

.btn-tertiary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-tertiary .icon {
    width: 20px;
    height: 20px;
}

/* Legacy button styles for compatibility */
.btn-danger {
    background: var(--color-error-red);
    color: var(--color-white);
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: 2px;
    height: 40px;
    padding: 8px var(--spacing-3);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-danger:hover { 
    background: #c51a00; 
    opacity: 0.9;
}

/* Remove red background from delete buttons - make them transparent with just the icon */
.btn-danger[title="Remove"] {
    background: transparent !important;
    color: var(--color-error-red);
    border: none;
    height: auto;
    padding: 2px 6px;
}

.btn-danger[title="Remove"]:hover {
    background: rgba(224, 30, 0, 0.1) !important;
    opacity: 1;
}

/* ============================================
   FORM GUIDELINES - Style Guide
   ============================================ */

/* Form Structure and Layout */
.form-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-8); /* 40px between sections */
}

.form-section {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-4); /* 16px between section title and form field */
}

.form-section-title {
    font-family: 'Roboto', sans-serif;
    font-size: 20px;
    font-weight: 700;
    line-height: 28px;
    color: var(--color-primary-blue);
    margin-bottom: 4px; /* 4px between section title and description */
}

.form-section-description {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 24px;
    color: var(--color-gray-900);
    margin-bottom: var(--spacing-4); /* 16px between description and form field */
}

/* Form Field Spacing */
.form-field {
    margin-bottom: var(--spacing-6); /* 24px between form fields */
}

.form-field.horizontal {
    display: flex;
    gap: var(--spacing-4); /* 16px between form fields arranged side by side */
    align-items: flex-start;
}

.form-field + .form-subsection {
    margin-top: var(--spacing-6); /* 24px between form field and sub-section */
}

.form-field + .form-button {
    margin-top: var(--spacing-6); /* 24px between form field and form button */
}

/* Checkbox and Radio Button Spacing */
.checkbox-group,
.radio-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3); /* 12px between checkbox/radio buttons in a group */
}

.checkbox-item,
.radio-item {
    display: flex;
    align-items: center;
    gap: 4px; /* 4px between label and checkbox/radio button */
}

.checkbox-group + .form-field,
.radio-group + .form-field {
    margin-top: var(--spacing-6); /* 24px between checkbox/radio button and unrelated form field */
}

/* Dependent and Nested Field Spacing */
.form-field-dependent {
    margin-top: var(--spacing-2); /* 8px between form field and dependent form field */
}

.form-field-nested {
    margin-left: var(--spacing-8); /* 32px left indentation for nested form fields */
    margin-top: var(--spacing-2); /* 8px between parent form field and first nested form field */
}

/* Divider and Validation Spacing */
.form-divider {
    margin: var(--spacing-6) 0; /* 24px between divider and other form fields */
    border: none;
    border-top: 1px solid var(--color-blue-50);
}

.form-validation {
    margin-top: var(--spacing-8); /* 40px between form field and form validation */
    margin-bottom: var(--spacing-8); /* 32px minimum between form validation and bottom of screen */
}

/* Form Editor Styles */
.form-editor { 
    display: flex; 
    flex-direction: column; 
    gap: var(--spacing-4); 
}

.form-elements { 
    width: 100%; 
}

.form-properties { 
    width: 100%; 
}

.element-actions { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 6px; 
    margin: var(--spacing-2) 0; 
}

.element-icon-btn { 
    width: 32px; 
    height: 32px; 
    padding: 4px; 
    font-size: 16px; 
    border-radius: 2px; 
    border: none !important; /* Remove borders from element buttons */
}

.element-list { 
    border: 1px solid var(--color-blue-50); 
    border-radius: 2px; 
    padding: 6px; 
    /* Removed max-height to allow dynamic resizing */
    /* Overflow auto only when needed */
    min-height: 60px;
}

.element-item { 
    display: flex; 
    gap: var(--spacing-2); 
    padding: 6px var(--spacing-2); 
    border-radius: 2px; 
    cursor: grab; 
}

.element-item:hover { 
    background: var(--color-gray-25); 
}

.element-item.selected { 
    background: var(--color-blue-50); 
}

.element-type { 
    font-weight: 700; 
    color: var(--color-primary-blue); 
    text-transform: capitalize; 
    width: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.element-type .material-icons {
    font-size: 20px;
    width: 20px;
    height: 20px;
    color: var(--color-primary-blue);
}

.element-label { 
    color: var(--color-gray-900); 
    overflow: hidden; 
    text-overflow: ellipsis; 
    white-space: nowrap; 
}

.row-drop-zone { 
    margin-top: var(--spacing-2);
    border: 2px dashed var(--color-blue-50);
    border-radius: 2px;
    padding: var(--spacing-3);
    min-height: 60px;
    background: var(--color-gray-25);
    /* Allow dynamic resizing - no max-height */
    display: flex;
    flex-direction: column;
}

.row-drop-zone:hover { 
    border-color: var(--color-primary-blue); 
    background: var(--color-blue-50); 
}

.drop-zone-placeholder {
  text-align: center;
    color: var(--color-gray-500);
  font-size: 12px;
    padding: var(--spacing-2);
  font-style: italic;
}

.preview-card { 
    border: 1px solid var(--color-blue-50); 
    border-radius: 2px; 
    padding: var(--spacing-3); 
    background: var(--color-white); 
}

.preview-field { 
    margin-bottom: 10px; 
}

.preview-label { 
    font-weight: 600; 
    color: var(--color-gray-900); 
}

/* ============================================
   MATERIAL ICONS - Style Guide
   Single color Material Design icons with blue branding
   ============================================ */

/* Material Icons Base Styles */
.material-icons {
    font-family: 'Material Icons';
    font-weight: 400;
    font-style: normal;
    font-size: 24px; /* Default size */
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    font-feature-settings: 'liga';
    -webkit-font-feature-settings: 'liga';
    -webkit-font-smoothing: antialiased;
    font-variant: normal;
    text-rendering: optimizeLegibility;
    speak: none;
    color: var(--color-primary-blue); /* Blue branding from style guide */
    /* Ensure icons render as glyphs, not text */
    font-display: block;
}

/* Navigation icons: 24px size */
.node-menu-icon .material-icons {
    font-family: 'Material Icons' !important;
    font-size: 24px !important;
    font-weight: 400 !important;
    width: 24px;
    height: 24px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 24px;
    /* Ensure Material Icons font is used */
    font-style: normal !important;
    letter-spacing: normal !important;
    text-transform: none !important;
}

/* Button icons: 20px size */
.btn-primary .material-icons,
.btn-secondary .material-icons,
.btn-tertiary .material-icons,
.element-icon-btn .material-icons {
    font-size: 20px;
    width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 20px;
}

/* Secondary button icons use blue branding */
.btn-secondary .material-icons {
    color: var(--color-primary-blue);
}

/* Primary button icons should be white */
.btn-primary .material-icons {
    color: var(--color-white);
}

/* Tertiary button icons inherit gray color */
.btn-tertiary .material-icons {
    color: var(--color-gray-700);
}

/* Element type icons in lists */
.element-type .material-icons {
    font-size: 20px;
    width: 20px;
    height: 20px;
    color: var(--color-primary-blue);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Element icon buttons in form editor */
.element-icon-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border: none !important; /* Remove borders from element buttons */
}

.element-icon-btn .material-icons {
    font-size: 20px;
    color: var(--color-primary-blue);
}

.element-icon-btn:hover .material-icons {
    color: var(--color-primary-blue);
    opacity: 0.9;
}

.element-icon-btn:hover {
    background: rgba(4, 18, 149, 0.05);
}

/* Node menu icons with status-specific colors */
.node-menu-icon.end-icon .material-icons {
    color: var(--color-success-green);
}

.node-menu-icon.end-error-icon .material-icons {
    color: var(--color-error-red);
}

.node-menu-icon.frontend-form-icon .material-icons {
    color: var(--color-primary-blue);
}

.node-menu-icon.condition-icon .material-icons {
    color: var(--color-warning-orange);
}

/* Update node-menu-icon to properly display Material Icons */
.node-menu-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: var(--spacing-3);
    /* Remove any font inheritance that might interfere with Material Icons */
    font-size: inherit;
    font-weight: inherit;
    font-family: inherit;
}

.node-menu-icon.end-icon {
    background: transparent;
    border: none;
    color: var(--color-success-green);
}

.node-menu-icon.end-error-icon {
    background: transparent;
    border: none;
    color: var(--color-error-red);
}

.node-menu-icon.frontend-form-icon {
    background: var(--color-blue-50);
    border: 2px solid var(--color-primary-blue);
    border-radius: 2px;
    color: var(--color-primary-blue);
}

.node-menu-icon.condition-icon {
    background: transparent;
    border: none;
    color: var(--color-warning-orange);
}